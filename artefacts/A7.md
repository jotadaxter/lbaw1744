# A7: High-level architecture. Privileges. Web resources specification
 
## 1. Overview
 
> Identify and overview the modules that will be part of the application.

<table>
<tbody>
<tr">
<th>M01: Authentication and Individual Profile</th>
<td>Web resources associated with user authentication and individual profile management, includes the following system features: login/logout, registration, credential recovery, view and edit personal profile information.</td>
</tr>
<tr>
<th>M02: Products</th>
<td>Web resources associated with products, includes the following system features: search, view, add and edit product.</td>
</tr>
<tr>
<th>M03: Reviews and Wish list</th>
<td>Web resources associated with reviews and wish list, includes the following system features: add review, list reviews and delete reviews; add items to wish list and remove items from the wish list.</td>
</tr>
<tr>
<th>M04: User Administration and Static pages</th>
<td>Web resources associates with user management, specifically: view and search users, delete or block user accounts, view and change user information, and view system access details for each user. Web resources with static content are associated with this module:about, contact</td>
</tr>
</tbody>
</table>

## 2. Permissions
 
> Define the permissions used by each module, necessary to access its data and features.

<table>
<tbody>
<tr>
<th>PUB</th>
<td>Public</td>
<td>Group of users without privileges</td>
</tr>
<tr>
<th>USR</th>
<td>User</td>
<td>Authenticated user</td>
</tr>
<tr>
<th>OWN</th>
<td>Owner</td>
<td>Group of users that can update their profiles and have privileges regarding their items.</td>
</tr>
<tr>
<th>ADM</th>
<td>Administrator</td>
<td>Group of administrators</td>
</tr>
</tbody>
</table>

## 3. Modules
 
> Web resources organized by module
> Document and describe the web resources associated with each module, indicating the URL, HTTP method, request parameters and response.
> Follow the RESTful resource naming
> At the end of this page is presented some usual descriptors to document the web resources.
 
### 3.1 Module M01: Authentication and Individual Profile

* R101: Login Form /login
* R102: Login Action /login
* R103: Logout Action /logout
* R104: Register Form /register
* R105: Register Action /register
* R106: View Profile /users/{id}
* R107: Edit Profile Form /users/{id}/edit_profile
* R108: Edit Profile Action /users/{id}
* R109: Password Reset Form /password/reset
* R110: Password Reset Action /password/reset
* R111: Password Confirmation /password/confirmation
* R112: Password Change Form /password/change/{id}
* R113: Password Change Action /password/change/{id}
* R114: User History /users/{id}/history

#### R101: Login Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /login</td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to login to a user account.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI08</td>
</tr>
<tr>
<th>SUBMIT</th>
<td>R102</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R102: Login Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /login</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>This web resource logs the user into the system. Redirects to the user profile page on success and the login form on failure.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Request Body</th>
<td>+username: string</td><td>Username </td>
</tr>
<tr>
<th></th>
<td>+password: string</td><td>Password </td>
</tr>
<tr>
<th>Redirects</th>
<td>R106</td><td>Success </td>
</tr>
<tr>
<tr>
<th></th>
<td>R101</td><td>Error </td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

#### R103: Logout Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /logout</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>This web resource logs out the authenticated user or admin.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Redirects</th>
<td>R101</td><td>Success </td>
</tr>
<tr>
<tr>
<th>Permissions</th>
<td>USR, ADM</td><td> </td>
</tr>
</tbody>
</table>

#### R104: Register Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /register</td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to register to a user account.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI07</td>
</tr>
<tr>
<th>SUBMIT</th>
<td>R105</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R105: Register Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /register</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>This web resource inserts the user into the system. Redirects to the user profile page on success and the register form on failure.<td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Request Body</th>
<td>+username: string</td><td>Username </td>
</tr>
<tr>
<th></th>
<td>+password: string</td><td>Password </td>
</tr>
<tr>
<th></th>
<td>+confirmPassword: string: string</td><td>Password confirmation</td>
</tr>
<tr>
<th></th>
<td>+fullname: string</td><td>Full Name </td>
</tr>
<tr>
<th></th>
<td>+email: string</td><td>Password </td>
</tr>
<tr>
<th></th>
<td>+phone_number: integer</td><td>Phone Number </td>
</tr>
<tr>
<th></th>
<td>?img: string</td><td>Profile Picture Path </td>
</tr>
<tr>
<th>Redirects</th>
<td>R106</td><td>Success </td>
</tr>
<tr>
<tr>
<th></th>
<td>R104</td><td>Error </td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

#### R106: View Profile

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{id}</td>
<td></td>
</tr>
<tr>
<th>Description</th>
<td>Shows the user individual profile page.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td> </td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>user primary key </td>
</tr>
<tr>
<th>UI</th>
<td><a url="https://github.com/jotadaxter/lbaw1744/blob/master/artefacts/A3.md#ui03-profile">UI03</a></td><td> </td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td> </td>
</tr>
</tbody>
</table>

#### R107: Edit Profile Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{id}/editProfile</td>
<td></td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to edit profile info.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td> </td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>user primary key </td>
</tr>
<tr>
<th>UI</th>
<td>UI04</td><td> </td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td> </td>
</tr>
</tbody>
</table>

#### R108: Edit Profile Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/edit/{id}</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>Web resource that changes user profile info based on the input received. Redirects to the user profile on success and edit profile page on failure.<td></td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>user primary key </td>
</tr>
<tr>
<th>Request Body</th>
<td>?username: string</td><td>Username </td>
</tr>
<tr>
<th></th>
<td>?password: string</td><td>Password </td>
</tr>
<tr>
<th></th>
<td>?confirmPassword: string: string</td><td>Password confirmation</td>
</tr>
<tr>
<th></th>
<td>?fullname: string</td><td>Full Name </td>
</tr>
<tr>
<th></th>
<td>?email: string</td><td>Password </td>
</tr>
<tr>
<th></th>
<td>?phone_number: integer</td><td>Phone Number </td>
</tr>
<tr>
<th></th>
<td>?img: string</td><td>Profile Picture Path </td>
</tr>
<tr>
<th>Redirects</th>
<td>R106</td><td>Success </td>
</tr>
<tr>
<tr>
<th></th>
<td>R107</td><td>Error </td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

#### R109: Password Recovery Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /password/reset</td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to request a token to reset the password.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI10</td>
</tr>
<tr>
<th>SUBMIT</th>
<td>R110</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R110: Password Recovery Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /password/reset</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>Web resource that sends a reset password link to the specified email.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Request Body</th>
<td>?email: string</td><td>User Email </td>
</tr>
<tr>
<th>Redirects</th>
<td>UI01</td><td>Success </td>
</tr>
<tr>
<th></th>
<td>R109</td><td>Error </td>
</tr>
<tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

#### R111: Password Confirmation

<table>
<tbody>
<tr>
<th>URL</th>
<td> /password/change</td>
</tr>
<tr>
<th>Description</th>
<td>Page for the confirmation of the password.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI15</td>
</tr>
<tr>
<th>SUBMIT</th>
<td>R112</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R112: Password Change Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /password/change/{id}</td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to change the password.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI10</td>
</tr>
<tr>
<th>SUBMIT</th>
<td>R113</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R113: Password Change Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /password/reset/{id}</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>Web resource that changes a user's password.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
 <tr>
<th>Parameters</th>
<td>+id: integer</td><td>user primary key </td>
</tr>
<tr>
<th></th>
<td>?password: string</td><td>New Password </td>
</tr>
<tr>
<th></th>
<td>?confirmPassword: string: string</td><td>Confirm New Password</td>
</tr>
<tr>
<th>Redirects</th>
<td>UI03</td><td>Success </td>
</tr>
<tr>
<th></th>
<td>R112</td><td>Error </td>
</tr>
<tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

#### R114: User History
<table>
<tbody>
<tr>
<th>URL</th>
<td> users/{id}/history</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>Page with a user's History.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>user primary key </td>
</tr>
<tr>
<th>UI</th>
<td>UI18</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>USR, ADM</td><td></td>
</tr>
</tbody>
</table>


### 3.2 Module M02: Products

* R201: Search Product Page /products
* R202: Search Product API /api/products
* R203: View Product /products/{product_id}
* R204: Add Product Form /products/create
* R205: Add Product Action /products
* R206: Edit Product Form /products/{product_id}/edit
* R207: Edit Product Action /products/{product_id}
* R208: Remove Product Form /products/{product_id}
* R209: Remove Product Action /products/{product_id}
* R210: Add Image to Product Form /products/{product_id}/addImage
* R211: Add Image to Product Action /products/{product_id}

#### R201: Search Product Page 
<table>
<tbody>
<tr>
<th>URL</th>
<td> /products</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to search products./td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>?query: string</td><td>String field to search for in products</td>
</tr>
<tr>
<th></th>
<td>?tag: string</td><td>Tags for the product</td>
</tr>
<tr>
<th></th>
<td>?operating_system: string</td><td>Operating system of the product</td>
</tr>
<tr>
<th></th>
<td>?min_price: integer</td><td>Minimum price of the product</td>
</tr>
<tr>
<th></th>
<td>?max_price: integer</td><td>Maximum price of the product</td>
</tr>
<tr>
<th>UI</th>
<td>UI 05</td><td></td>
</tr>
<tr>
 <th>AJAX Calls</th>
<td>R202</td><td></td>
</tr>
 <tr>
<th>Permissions</th>
<td>PUB</td><td></td>
</tr>
</tbody>
</table>

#### R202: Search Product API

<table>
<tbody>
<tr>
<th>URL</th>
<td>/api/products</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource searches the system for products and returns the product.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<tr>
<th>Parameters</th>
<td>?query: string</td><td>String field to search for in products</td>
</tr>
<tr>
<th></th>
<td>?tag: string</td><td>Tags for the product</td>
</tr>
<tr>
<th></th>
<td>?operating_system: string</td><td>Operating system of the product</td>
</tr>
<tr>
<th></th>
<td>?min_price: integer</td><td>Minimum price of the product</td>
</tr>
<tr>
<th></th>
<td>?max_price: integer</td><td>Maximum price of the product</td>
</tr>
<tr>
<th>Response Body</th>
<td>JSON302</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td></td>
</tr>
</tbody>
</table>

#### R203: View Product
<table>
<tbody>
<tr>
<th>URL</th>
<td> /products/{product_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>Shows the product's page.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th>UI</th>
<td>UI06</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td></td>
</tr>
</tbody>
</table>

#### R204: Add Product Form
<table>
<tbody>
<tr>
<th>URL</th>
<td> /products/create</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>Form to create a new product</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th>UI</th>
<td>UI13</td><td></td>
</tr>
 <tr>
<th>Submit</th>
<td>R205</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td></td>
</tr>
</tbody>
</table>

#### R205: Add Product Action
<table>
<tbody>
<tr>
<th>URL</th>
<td> /products</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>	Web resource that creates a new product based on the input received. Redirects to the new product page on success and back to new product form on failure.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td></td>
</tr>
<tr>
<th>Request Body</th>
<td>+name: string</td><td>Name of the Product</td>
</tr>
<tr>
<th></th>
<td>+description: stringr</td><td>Description of the Product</td>
</tr>
<tr>
<th></th>
<td>+operating_system: string</td><td>Operating System of the Product</td>
</tr>
<tr>
<th></th>
<td>+price: double</td><td>Price of the Product</td>
</tr>
<tr>
<th></th>
<td>+username: string</td><td>Username of the creator of the Product</td>
</tr>
<tr>
<th></th>
<td>+tags: string</td><td>Tags of a product</td>
</tr>
<tr>
<th></th>
<td>?img: string</td><td>Product Picture Path </td>
</tr>
<tr>
<th>Redirects</th>
<td>R203</td><td>Success</td>
</tr>
<tr>
<th></th>
<td>R204</td><td>Error</td>
</tr>
<tr>
<th>Permissions</th>
<td>USR, OWN</td><td></td>
</tr>
</tbody>
</table>

#### R206: Edit Product Form
<table>
<tbody>
<tr>
<th>URL</th>
<td>/products/{product_id}/edit</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to edit product info.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th>UI</th>
<td>UI14</td><td></td>
</tr>
 <tr>
<th>Submit</th>
<td>R207</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>OWN, ADM</td><td></td>
</tr>
</tbody>
</table>

#### R207: Edit Product Action
<table>
<tbody>
<tr>
<th>URL</th>
<td> /products/{product_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>	Web resource that changes user product info based on the input received. Redirects to the product on success and edit product page on failure.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>PUT</td><td></td>
</tr>
<tr>
<th>Request Body</th>
<td>+name: string</td><td>Name of the Product</td>
</tr>
<tr>
<th></th>
<td>+description: stringr</td><td>Description of the Product</td>
</tr>
<tr>
<th></th>
<td>+operating_system: string</td><td>Operating System of the Product</td>
</tr>
<tr>
<th></th>
<td>+price: double</td><td>Price of the Product</td>
</tr>
<tr>
<th></th>
<td>+username: string</td><td>Username of the creator of the Product</td>
</tr>
<tr>
<th></th>
<td>+tags: string</td><td>Tags of a product</td>
</tr>
<tr>
<th>Redirects</th>
<td>R203</td><td>Success</td>
</tr>
<tr>
<th></th>
<td>R206</td><td>Error</td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td></td>
</tr>
</tbody>
</table>

#### R208: Remove Product
<table>
<tbody>
<tr>
<th>URL</th>
<td>/products/{product_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to remove product.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>UI</th>
<td>UI16</td><td></td>
</tr>
<tr>
<th>Submit</th>
<td>R209</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>OWN, ADM</td><td></td>
</tr>
</tbody>
</table>

### R209: Remove Product Action
<table>
<tbody>
<tr>
<th>URL</th>
<td>/products/{product_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource removes the product from the system. Redirects to the Homepage on success and the View Product page on failure.
</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>DELETE</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
 <tr>
<th>Parameters</th>
<td>+username: string</td><td>Username of the owner of the Product</td>
</tr>
<tr>
<th>UI</th>
<td>UI14</td><td></td>
</tr>
<tr>
<th>Redirects</th>
<td>UI01</td><td>Success</td>
</tr>
<tr>
<th></th>
<td>R203</td><td>Error</td>
</tr>
<th>Permissions</th>
<td>OWN, ADM</td><td></td>
</tr>
</tbody>
</table>

#### R210: Add Image to Product Form
<table>
<tbody>
<tr>
<th>URL</th>
<td>/products/{product_id}/addImage</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to add a Image to a Product.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th>UI</th>
<td>UI17</td><td></td>
</tr>
<tr>
<th>Submit</th>
<td>R211</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>OWN, ADM</td><td></td>
</tr>
</tbody>
</table>

#### R211: Add Image to Product Action
<table>
<tbody>
<tr>
<th>URL</th>
<td> /products/{product_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>	Web resource that adds a new Image to a Product's Image Gallery. Redirects to the product on success and edit product page on failure.</td><td></td>
</tr>
<tr>
<th></th>
<td>?img: string</td><td>Product Picture Path </td>
</tr>
<tr>
<th>Method</th>
<td>PUT</td><td></td>
</tr>
<tr>
<th>Redirects</th>
<td>R203</td><td>Success</td>
</tr>
<tr>
<th></th>
<td>R210</td><td>Error</td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td></td>
</tr>
</tbody>
</table>

#### R212: Add Product to Wish list

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{user_id}/wishlist/products/{product_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource add the product to the wish list.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+user_id: integer</td><td>User Id</td>
</tr>
<tr>
<th></th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th>Returns</th>
<td>200 OK</td><td>The product was successfully added to the wish list.  </td>
</tr>
<tr>
<th></th>
<td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header. </td>
</tr>
<tr>
<th></th>
<td>403 Forbidden</td><td>Error. Access to page or action is forbidden. </td>
</tr>
<tr>
<th></th>
<td>404 Not Found</td><td>Error. No user with the specified primary key exists. </td>
</tr>
<tr>
<tr>
<th>Permissions</th>
<td>USR</td><td></td>
</tr>
</tbody>
</table>

#### R213: Add Product to cart

| __URL__         | /users/{user_id}/cart/products/{product_id}    |                                                          |
|-----------------|------------------------------------------------|----------------------------------------------------------|
| __Description__ | This web resource adds  a product to the cart. |                                                          |
| __Method__      | POST                                           |                                                          |
| __Parameters__  | +user_id: integer                              | User Id                                                  |
|                 | +product_id: integer                           | Product Id                                               |
| __Returns__     | 200 OK                                         | Successfully added the product to the user's cart.       |
|                 | 400 Bad Request                                | Error. Error message is specified via a HTTP header.     |
|                 | 403 Forbidden                                  | Error. Access to page or action is forbidden.            |
|                 | 404 Not Found                                  | Error. No user with the specified primary key exists.    |
|                 |                                                | Error. No product with the specified primary key exists. |
| __Permissions__ | USR                                            |                                                          |


### 3.3 Module M03: Reviews and Wish list

* R301: View Reviews /products/{product_id}/reviews
* R302: Add Review /products/{product_id}/reviews
* R303: Edit Review /products/{product_id}/reviews/{sk_id}
* R304: Delete Review /products/{product_id}/reviews/{sk_id}
* R305: View Wish list /users/{user_id}/wishlist/
* R306: Add to Wish list /users/{user_id}/wishlist/products/{product_id}
* R307: Remove from Wish list /users/{user_id}/wishlist/products/{product_id}

#### R301: View Reviews

<table>
<tbody>
<tr>
<th>URL</th>
<td> /products/{product_id}/reviews</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource displays the product's reviews.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th>Response Body</th>
<td>JSON301</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td></td>
</tr>
</tbody>
</table>

#### R302: Add Review

<table>
<tbody>
<tr>
<th>URL</th>
<td> /products/{product_id}/reviews</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource adds a new review.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td></td>
</tr>
<tr>
<th>Request Body</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th></th>
<td>+sk_id: integer</td><td>Serial Key Id (Review Id)</td>
</tr>
<tr>
<th></th>
<td>+rating: integer</td><td>Rating</td>
</tr>
<tr>
<th></th>
<td>+review_date: integer</td><td>Review Date</td>
</tr>
<tr>
<th></th>
<td>+comment: integer</td><td>Comment</td>
</tr>
<tr>
<th>Returns</th>
<td>200 OK</td><td>The review was successfully added.  </td>
</tr>
<tr>
<th></th>
<td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header. </td>
</tr>
<tr>
<th></th>
<td>403 Forbidden</td><td>Error. Access to page or action is forbidden. </td>
</tr>
<tr>
<th></th>
<td>404 Not Found</td><td>Error. No user with the specified primary key exists. </td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td></td>
</tr>
</tbody>
</table>

#### R303: Edit Review

<table>
<tbody>
<tr>
<th>URL</th>
<td> /products/{product_id}/reviews/{sk_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource edits a product review.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>PUT</td><td></td>
</tr>
<tr>
<th>Request Body</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th></th>
<td>+sk_id: integer</td><td>Serial Key Id (Review Id)</td>
</tr>
<tr>
<th></th>
<td>+rating: integer</td><td>Rating</td>
</tr>
<tr>
<th></th>
<td>+review_date: integer</td><td>Review Date</td>
</tr>
<tr>
<th></th>
<td>+comment: integer</td><td>Comment</td>
</tr>
<tr>
<th>Returns</th>
<td>200 OK</td><td>The review was successfully edited.  </td>
</tr>
<tr>
<th></th>
<td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header. </td>
</tr>
<tr>
<th></th>
<td>403 Forbidden</td><td>Error. Access to page or action is forbidden. </td>
</tr>
<tr>
<th></th>
<td>404 Not Found</td><td>Error. No user with the specified primary key exists. </td>
</tr>
<tr>
<th>Permissions</th>
<td>USR, OWN</td><td></td>
</tr>
</tbody>
</table>

#### R304: Delete Review

<table>
<tbody>
<tr>
<th>URL</th>
<td> /products/{product_id}/reviews/{sk_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource edits a product review.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>DELETE</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th></th>
<td>+sk_id: integer</td><td>Serial Key Id (Review Id)</td>
</tr>
<tr>
<th>Returns</th>
<td>200 OK</td><td>The review was successfully deleted.  </td>
</tr>
<tr>
<th></th>
<td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header. </td>
</tr>
<tr>
<th></th>
<td>403 Forbidden</td><td>Error. Access to page or action is forbidden. </td>
</tr>
<tr>
<th></th>
<td>404 Not Found</td><td>Error. No user with the specified primary key exists. </td>
</tr>
<tr>
<th>Permissions</th>
<td>USR, OWN</td><td></td>
</tr>
</tbody>
</table>

#### R305: View Wish list

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{id}/wishlist/</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>Show user's wish list page.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+user_id: integer</td><td>User Id</td>
</tr>
<tr>
<th>AJAX Calls</th>
<td>R307</td><td></td>
</tr>
<tr>
<th>UI</th>
<td>UI12</td><td></td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td></td>
</tr>
</tbody>
</table>

#### R307: Remove from Wish list

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{user_id}/wishlist/products/{product_id}</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource remove the product from the wish list.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>DELETE</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+user_id: integer</td><td>User Id</td>
</tr>
<tr>
<th></th>
<td>+product_id: integer</td><td>Product Id</td>
</tr>
<tr>
<th>Returns</th>
<td>200 OK</td><td>The product was successfully removed from the wish list.  </td>
</tr>
<tr>
<th></th>
<td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header. </td>
</tr>
<tr>
<th></th>
<td>403 Forbidden</td><td>Error. Access to page or action is forbidden. </td>
</tr>
<tr>
<th></th>
<td>404 Not Found</td><td>Error. No user with the specified primary key exists. </td>
</tr>
<tr>
<tr>
<th>Permissions</th>
<td>USR, ADM</td><td></td>
</tr>
</tbody>
</table>

### 3.4 Module M04: Cart and Checkout

* R401: View Products in cart /users/{user_id}/cart/
* R402: Checkout Products in cart /users/{user_id}/cart/products/
* R403: Remove Product from cart /users/{user_id}/cart/products/{product_id}
* R404: Checkout Payment Form /users/{user_id}/cart/

#### R401: Vew Products in cart

| __URL__         | /users/{user_id}/cart/products/ |                                                       |
|-----------------|------------------------|-------------------------------------------------------|
| __Description__ | Show user's cart page. |                                                       |
| __Method__      | GET                    |                                                       |
| __Parameters__  | +user_id: integer      | User Id                                               |
| __Returns__     | 200 OK                 | Successfully accessed the user's cart page.           |
|                 | 400 Bad Request        | Error. Error message is specified via a HTTP header.  |
|                 | 403 Forbidden          | Error. Access to page or action is forbidden.         |
|                 | 404 Not Found          | Error. No user with the specified primary key exists. |
| __Permissions__ | USR                    |                                                       |

#### R402: Checkout Products in cart

| __URL__         | /users/{user_id}/cart/products/                                                                                         |                                                       |
|-------------|---------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
| __Description__ | This web resource allows a user to fulfill a transaction by paying and acquiring all the products in its cart |                                                       |
| __Method__      | PUT                                                                                                           |                                                       |
| __Parameters__  | +user_id: integer                                                                                                  | User Id                                               |
| __Returns__     | 200 OK                                                                                                        | Checkout successfully fulfilled                       |
|             | 400 Bad Request                                                                                               | Error. Error message is specified via a HTTP header.  |
|             | 403 Forbidden                                                                                                 | Error. Access to page or action is forbidden.         |
|             | 404 Not Found                                                                                                 | Error. No user with the specified primary key exists. |
| __Permissions__ | USR                                                                                                           |                                                       |

#### R403: Remove product from cart

| __URL__         | /users/{user_id}/cart/products/{product_id}        |                                                             |
|-----------------|----------------------------------------------------|-------------------------------------------------------------|
| __Description__ | This web resource removes a product from the cart. |                                                             |
| __Method__      | DELETE                                             |                                                             |
| __Parameters__  | +user_id: integer                                  | User Id                                                     |
|                 | +product_id: integer                               | Product Id                                                  |
| __Returns__     | 200 OK                                             | Successfully removed the product from the user's cart page. |
|                 | 400 Bad Request                                    | Error. Error message is specified via a HTTP header.        |
|                 | 403 Forbidden                                      | Error. Access to page or action is forbidden.               |
|                 | 404 Not Found                                      | Error. No user with the specified primary key exists.       |
|                 |                                                    | Error. No product with the specified primary key exists.    |
| __Permissions__ | USR, ADM                                           |                                                             |

#### R404: Checkout Payment Form

| __URL__         | /users/{user_id}/cart/                           |         |
|-----------------|-------------------------------------------------|---------|
| __Description__ | Select a payment method to complete a checkout. |         |
| __Method__      | GET                                             |         |
| __Parameters__  | +user_id                                        | User Id |
| __UI__          | UI19                                            |         |
| __Submit__      | R401                                            |         |
| __Permissions__ | USR                                             |         |

### 3.5 Module M05: User Administration and Static pages

* R501: Get Users /users
* R502: Suspend User /users/{id}/suspend
* R503: Reinstate users /users/{id}/reinstate
* R504: About /about
* R505: 404 /404
 
#### R501: Get Users

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users</td>
</tr>
<tr>
<th>Description</th>
<td>Get all registed users.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI09</td>
</tr>
<tr>
<th>Permissions</th>
<td>ADM</td>
</tr>
</tbody>
</table>

#### R502: Suspend User

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{id}/suspend</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource suspends an user.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>PUT</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>User Id </td>
</tr>
<tr>
<th>Returns</th>
<td>200 OK</td><td>The user was successfully suspended.  </td>
</tr>
<tr>
<th></th>
<td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header. </td>
</tr>
<tr>
<th></th>
<td>403 Forbidden</td><td>Error. Access to page or action is forbidden. </td>
</tr>
<tr>
<th></th>
<td>404 Not Found</td><td>Error. No user with the specified primary key exists. </td>
</tr>
<tr>
<th>Permissions</th>
<td>ADM</td><td></td>
</tr>
</tbody>
</table>

#### R503: Reinstate users

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{id}/reinstate</td><td></td>
</tr>
<tr>
<th>Description</th>
<td>This web resource reinstates an user.</td><td></td>
</tr>
<tr>
<th>Method</th>
<td>PUT</td><td></td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>User Id </td>
</tr>
<tr>
<th>Returns</th>
<td>200 OK</td><td>The user was successfully reinstated.  </td>
</tr>
<tr>
<th></th>
<td>400 Bad Request</td><td>Error. Error message is specified via a HTTP header. </td>
</tr>
<tr>
<th></th>
<td>403 Forbidden</td><td>Error. Access to page or action is forbidden. </td>
</tr>
<tr>
<th></th>
<td>404 Not Found</td><td>Error. No user with the specified primary key exists. </td>
</tr>
<tr>
<th>Permissions</th>
<td>ADM</td><td></td>
</tr>
</tbody>
</table>

#### R504: About

<table>
<tbody>
<tr>
<th>URL</th>
<td> /about</td>
</tr>
<tr>
<th>Description</th>
<td>Get about page.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI02</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R505: 404

<table>
<tbody>
<tr>
<th>URL</th>
<td> /404</td>
</tr>
<tr>
<th>Description</th>
<td>Get 404 page.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI11</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>
 
### 3.6 Module M06: Static Pages

* R601: View About Page /about/
* R602: View Contacts Page /contacts/
* R603: View Terms of Service Page /terms/
* R604: View Privacy Page /privacy/

#### R601: View About Page

| __URL__         | /about/               |   |
|-----------------|-----------------------|---|
| __Description__ | Shows the About page. |   |
| __Method__      | GET                   |   |
| __UI__          | UI02                  |   |
| __Permissions__ | USR                   |   |

#### R602: View Contacts Page

| __URL__         | /contacts/               |   |
|-----------------|--------------------------|---|
| __Description__ | Shows the Contacts page. |   |
| __Method__      | GET                      |   |
| __UI__          | UI20                     |   |
| __Permissions__ | USR                      |   |

##### R603: View Terms of Service Page

| __URL__         | /terms/                          |   |
|-----------------|----------------------------------|---|
| __Description__ | Shows the Terms of Service page. |   |
| __Method__      | GET                              |   |
| __UI__          | UI21                             |   |
| __Permissions__ | USR                              |   |

#### R604: View Privacy Page

| __URL__         | /privacy/               |   |
|-----------------|-------------------------|---|
| __Description__ | Shows the Privacy page. |   |
| __Method__      | GET                     |   |
| __UI__          | UI22                    |   |
| __Permissions__ | USR                     |   |

## 4. JSON/XML Types
 
> Document the JSON or XML responses that will be used by the web resources.

### JSON301: View Reviews: {review}[]
```json
{
  "reviews": [
    {
      "sk_id": "500",
      "rating": "4",
      "review_date": "2018/3/1",
      "comment": "very good product although a tad expensive"
    },
    {
       "sk_id": "501",
       "rating": "5",
       "review_date": "2017/4/12",
       "comment": "i am amazed at this product it is very nice"
    },
    {
       "sk_id": "502",
       "rating": "5",
       "review_date": "2018/10/25",
       "comment": "this is an incredible piece of software"
    },
    {
       "sk_id": "503",
       "rating": "4",
       "review_date": "2017/6/15",
       "comment": "the product fulfills its purpose with precision"
    },
    {
       "sk_id": "504",
       "rating": "3",
       "review_date": "2018/2/5",
       "comment": "hey thats pretty good"
    },
    {
       "sk_id": "505",
       "rating": "5",
       "review_date": "2018/8/14",
       "comment": "i am astonished at how efficient this product is"
    },
    {
       "sk_id": "506",
       "rating": "2",
       "review_date": "2018/4/22",
       "comment": "way too expensive for the amount of features it comes with"
    },
    {
       "sk_id": "507",
       "rating": "4",
       "review_date": "2017/10/30",
       "comment": "way too cheap for the amount of features it comes with"
    },
    {
       "sk_id": "508",
       "rating": "1",
       "review_date": "2016/7/6",
       "comment": "absolutely atrocious, barely works, cant even install it"
    },
    {
       "sk_id": "509",
       "rating": "3",
       "review_date": "2018/12/14",
       "comment": "its nice but there are way better options out there"
    }
  ]
}
```

### JSON3202: Search Product API: {product}[]
```json
{
  "products": [
    {
      "product_id": "200",
      "user_id": "105",
      "description": "daw for live mixing and production",
      "release_date": "2015/10/20",
      "operating_system": "wml",
      "price": "599",
      "logo_path": "ableton9.jpg",
      "name": "ableton 0 live suite"
    },
    {
      "product_id": "201",
      "user_id": "106",
      "description": "image editing software",
      "release_date": "2016/2/14",
      "operating_system": "wml",
      "price": "599",
      "logo_path": "photoshop.jpg",
      "name": "adobe photoshop"
    },
    {
      "product_id": "202",
      "user_id": "107",
      "description": "programming ide",
      "release_date": "2018/3/12",
      "operating_system": "w",
      "price": "199",
      "logo_path": "visualstudio.jpg",
      "name": "visual studio 2018"
    },
    {
      "product_id": "203",
      "user_id": "108",
      "description": "video editing software",
      "release_date": "2014/1/22",
      "operating_system": "wm",
      "price": "299",
      "logo_path": "sonyvegas.jpg",
      "name": "sony vegas pro"
    },
    {
      "product_id": "2014",
      "user_id": "109",
      "description": "3d rendering and editing software",
      "release_date": "2013/10/12",
      "operating_system": "wml",
      "price": "0",
      "logo_path": "blender.jpg",
      "name": "blender"
    },
    {
      "product_id": "205",
      "user_id": "105",
      "description": "synthetizer plug in for ableton",
      "release_date": "2017/11/21",
      "operating_system": "wml",
      "price": "29",
      "logo_path": "massive.jpg",
      "name": "ableton massive plugin"
    },
    {
      "product_id": "206",
      "user_id": "106",
      "description": "vector graphic design software",
      "release_date": "2016/4/1",
      "operating_system": "wml",
      "price": "99",
      "logo_path": "ilustrator.jpg",
      "name": "adobe ilustrator"
    },
    {
      "product_id": "2017",
      "user_id": "107",
      "description": "programming text editor",
      "release_date": "2017/11/10",
      "operating_system": "w",
      "price": "0",
      "logo_path": "visualcode.jpg",
      "name": "microsoft visual code"
    },
    {
      "product_id": "208",
      "user_id": "108",
      "description": "digital audio editing suite software",
      "release_date": "2002/7/12",
      "operating_system": "wm",
      "price": "199",
      "logo_path": "soundforge.jpg",
      "name": "sony sound forge"
    },
    {
      "product_id": "209",
      "user_id": "109",
      "description": "dynamic mixing device",
      "release_date": "2018/10/9",
      "operating_system": "wml",
      "price": "99",
      "logo_path": "channelblender.jpg",
      "name": "channel blender"
    }
  ]
}
```


 
## Web resources descriptors
 
  * URL - Resource identifier, following the RESTful resource naming conventions 
  * Description - Describe the resource, when it's used and why
  * UI - Reference to the A3 user interface used by the resource
  * SUBMIT - Reference to the actions/requests integrated with the resource
  * Method - HTTP request Method
  * Parameters - Information that is sent through the URL, by a query string or path
  * Request Body - Data associated and transmitted with each request
  * Returns - HTTP code returned from a request
  * Response Body - Data sent from the server, in response to a given request
  * Permissions - Required permissions to access the resource
 
## Revision history
 
Changes made to the first submission:
1. First submission
 
***
 
GROUP1744, 09/04/2018

- Guilherme dos Santos Amaro, up201508537@fe.up.pt
- João Alexandre Carvalho Marinho dos Santos, up201504013@fe.up.pt
- Pedro José Lourenço Azevedo, up201306026@fe.up.pt
- Nuno Manuel Ferreira Corte-Real, up201405158@fe.up.pt

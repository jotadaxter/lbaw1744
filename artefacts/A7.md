# A7: High-level architecture. Privileges. Web resources specification
 
## 1. Overview
 
> Identify and overview the modules that will be part of the application.

<table>
<tbody>
<tr">
<th>M01: Authentication and Individual Profile</th>
<td>Web resources associated with user authentication and individual profile management, includes the following system features: login/logout, registration, credential recovery, view and edit personal profile information.</td>
</tr>
<tr>
<th>M02: Products</th>
<td>Web resources associated with products, includes the following system features: .</td>
</tr>
<tr>
<th>M03: Reviews and Wishlist</th>
<td>Web resources associated with reviews and wish list, includes the following system features: add review, list reviews and delete reviews; add items to wishlist and remove items from the wishlist.</td>
</tr>
<tr>
<th>M05: User Administration and Static pages</th>
<td>Web resources associates with user management, specifically: view and search users, delete or block user accounts, view and change user information, and view system access details for each user. Web resources with static content are associated with this module:about, contact</td>
</tr>
</tbody>
</table>

## 2. Permissions
 
> Define the permissions used by each module, necessary to access its data and features.

<table>
<tbody>
<tr>
<th>PUB</th>
<td>Public</td>
<td>Group of users without privileges</td>
</tr>
<tr>
<th>USR</th>
<td>User</td>
<td>Authenticated user</td>
</tr>
<tr>
<th>OWN</th>
<td>Owner</td>
<td>Group of users that can update their profiles and have privileges regarding their items.</td>
</tr>
<tr>
<th>ADM</th>
<td>Administrator</td>
<td>Group of administrators</td>
</tr>
</tbody>
</table>

## 3. Modules
 
> Web resources organized by module
> Document and describe the web resources associated with each module, indicating the URL, HTTP method, request parameters and response.
> Follow the RESTful resource naming
> At the end of this page is presented some usual descriptors to document the web resources.
 
### 3.1 Module M01: Authentication and Individual Profile

* R101: Login Form /login
* R102: Login Action /login
* R103: Logout Action /logout
* R104: Register Form /register
* R105: Register Action /register
* R106: View Profile /users/{id}
* R107: Edit Profile Form /users/{id}/editProfile
* R108: Edit Profile Action /users/{id}
* R109: Password Reset Form /password/reset
* R110: Password Reset Action /password/reset

#### R101: Login Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /login</td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to login to a user account.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI08</td>
</tr>
<tr>
<th>SUBMIT</th>
<td>R102</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R102: Login Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /login</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>This web resource logs the user into the system. Redirects to the user profile page on success and the login form on failure.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Request Body</th>
<td>+username: string</td><td>Username </td>
</tr>
<tr>
<th></th>
<td>+password: string</td><td>Password </td>
</tr>
<tr>
<th>Redirects</th>
<td>R106</td><td>Success </td>
</tr>
<tr>
<tr>
<th></th>
<td>R101</td><td>Error </td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

#### R103: Logout Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /logout</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>This web resource logs out the authenticated user or admin.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Redirects</th>
<td>R101</td><td>Success </td>
</tr>
<tr>
<tr>
<th>Permissions</th>
<td>USR, ADM</td><td> </td>
</tr>
</tbody>
</table>

#### R104: Register Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /register</td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to register to a user account.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI07</td>
</tr>
<tr>
<th>SUBMIT</th>
<td>R105</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R105: Register Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /register</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>This web resource inserts the user into the system. Redirects to the user profile page on success and the register form on failure.<td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Request Body</th>
<td>+username: string</td><td>Username </td>
</tr>
<tr>
<th></th>
<td>+password: string</td><td>Password </td>
</tr>
<tr>
<th></th>
<td>+confirmPassword: string: string</td><td>Password confirmation</td>
</tr>
<tr>
<th></th>
<td>+fullname: string</td><td>Full Name </td>
</tr>
<tr>
<th></th>
<td>+email: string</td><td>Password </td>
</tr>
<tr>
<th></th>
<td>+phone_number: integer</td><td>Phone Number </td>
</tr>
<tr>
<th></th>
<td>?img: string</td><td>Profile Picture Path </td>
</tr>
<tr>
<th>Redirects</th>
<td>R106</td><td>Success </td>
</tr>
<tr>
<tr>
<th></th>
<td>R104</td><td>Error </td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

#### R106: View Profile

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{id}</td>
<td></td>
</tr>
<tr>
<th>Description</th>
<td>Shows the user individual profile page.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td> </td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>user primary key </td>
</tr>
<tr>
<th>UI</th>
<td>UI03</td><td> </td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td> </td>
</tr>
</tbody>
</table>

#### R107: Edit Profile Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/{id}/editProfile</td>
<td></td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to edit profile info.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>GET</td><td> </td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>user primary key </td>
</tr>
<tr>
<th>UI</th>
<td>UI04</td><td> </td>
</tr>
<tr>
<th>Permissions</th>
<td>USR</td><td> </td>
</tr>
</tbody>
</table>

#### R108: Edit Profile Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /users/edit/{id}</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>Web resource that changes user profile info based on the input received. Redirects to the user profile on success and edit profile page on failure.<td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Parameters</th>
<td>+id: integer</td><td>user primary key </td>
</tr>
<tr>
<th>Request Body</th>
<td>?username: string</td><td>Username </td>
</tr>
<tr>
<th></th>
<td>?password: string</td><td>Password </td>
</tr>
<tr>
<th></th>
<td>?confirmPassword: string: string</td><td>Password confirmation</td>
</tr>
<tr>
<th></th>
<td>?fullname: string</td><td>Full Name </td>
</tr>
<tr>
<th></th>
<td>?email: string</td><td>Password </td>
</tr>
<tr>
<th></th>
<td>?phone_number: integer</td><td>Phone Number </td>
</tr>
<tr>
<th></th>
<td>?img: string</td><td>Profile Picture Path </td>
</tr>
<tr>
<th>Redirects</th>
<td>R106</td><td>Success </td>
</tr>
<tr>
<tr>
<th></th>
<td>R107</td><td>Error </td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

#### R109: Password Recovery Form

<table>
<tbody>
<tr>
<th>URL</th>
<td> /password/reset</td>
</tr>
<tr>
<th>Description</th>
<td>Page with a form to request a token to reset the password.</td>
</tr>
<tr>
<th>Method</th>
<td>GET</td>
</tr>
<tr>
<th>UI</th>
<td>UI10</td>
</tr>
<tr>
<th>SUBMIT</th>
<td>R110</td>
</tr>
<tr>
<th>Permissions</th>
<td>PUB</td>
</tr>
</tbody>
</table>

#### R110: Password Recovery Action

<table>
<tbody>
<tr>
<th>URL</th>
<td> /password/reset</td><td> </td>
</tr>
<tr>
<th>Description</th>
<td>Web resource that sends a reset password link to the specified email.</td><td> </td>
</tr>
<tr>
<th>Method</th>
<td>POST</td><td> </td>
</tr>
<tr>
<th>Request Body</th>
<td>?email: string</td><td>User Email </td>
</tr>
<tr>
<th>Redirects</th>
<td>UI01</td><td>Success </td>
</tr>
<tr>
<th></th>
<td>R109</td><td>Error </td>
</tr>
<tr>
<tr>
<th>Permissions</th>
<td>PUB</td><td> </td>
</tr>
</tbody>
</table>

### 3.2 Module 2
 
## 4. JSON/XML Types
 
> Document the JSON or XML responses that will be used by the web resources.

### JSON
```json
{
  "loan": [
    {
      "user": "Rui Paulo",
      "start": "2008-01-19 03:14:07",
      "end": "2008-01-30 03:14:07"
    },
    {
      "user": "Jaime Teixiera",
      "start": "2008-01-19 03:14:07",
      "end": ""
    }
  ]
}
```
 
## Web resources descriptors <note important>Do not include on the final artefact</note>
 
  * URL - Resource identifier, following the RESTful resource naming conventions 
  * Description - Describe the resource, when it's used and why
  * UI - Reference to the A3 user interface used by the resource
  * SUBMIT - Reference to the actions/requests integrated with the resource
  * Method - HTTP request Method
  * Parameters - Information that is sent through the URL, by a query string or path
  * Request Body - Data associated and transmitted with each request
  * Returns - HTTP code returned from a request
  * Response Body - Data sent from the server, in response to a given request
  * Permissions - Required permissions to access the resource
 
## Revision history
 
Changes made to the first submission:
1. First submission
 
***
 
GROUP1744, 02/04/2018

- Guilherme dos Santos Amaro, up201508537@fe.up.pt
- João Alexandre Carvalho Marinho dos Santos, up201504013@fe.up.pt
- Pedro José Lourenço Azevedo, up201306026@fe.up.pt
- Nuno Manuel Ferreira Corte-Real, up201405158@fe.up.pt
